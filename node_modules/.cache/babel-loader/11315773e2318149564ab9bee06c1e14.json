{"ast":null,"code":"var _jsxFileName = \"/home/onewithclouds/react/firebase-react-auth/src/contexts/AuthContext.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useContext, useState, useEffect } from 'react';\nimport { auth } from '../firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/React.createContext();\nexport function useAuth() {\n  _s();\n\n  return useContext(AuthContext);\n}\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function AuthProvider({\n  children\n}) {\n  _s2();\n\n  const [currentUser, setCurrentUser] = useState(); //loading state is monitored and defined explicitely because of firebase. \n  //firebase manages tokens in the local storage, so it needs to connect to google and \n  //setup asynchronously before any components render on the page. \n  //as these components depend on the state of the 'current user'\n\n  const [loading, setLoading] = useState(true); // PrivateRoute from react-router works in a way that distinguishes between a private and a public route(page)\n  //for the purposes of user-profile update. firebase monitors the state of current user, and as soon as \n  //profile update occurs logs the current user out. hence the state of profileUpdate is added below, modified by UpdateProfile with \n  //appropriate checks in the PrivateRoute to ensure the \n\n  const [profileUpdate, setProfileUpdate] = useState(false);\n\n  function signup(email, password) {\n    return auth.createUserWithEmailAndPassword(email, password);\n  }\n\n  function login(email, password) {\n    return auth.signInWithEmailAndPassword(email, password);\n  }\n\n  function logout() {\n    return auth.signOut();\n  }\n\n  function resetPassword(email) {\n    return auth.sendPasswordResetEmail(email);\n  }\n\n  function updateEmail(email) {\n    return currentUser.updateEmail(email);\n  }\n\n  function updatePassword(password) {\n    return currentUser.updatePassword(password);\n  }\n\n  useEffect(() => {\n    //firebase method onAuthStateChanged adds a listener to the page that listens for 'signup' events, which needs to be cleaned up after the component is unmounted\n    const unsubscribe = auth.onAuthStateChanged(user => {\n      setCurrentUser(user); //loading state is monitored and defined explicitely because of firebase. firebase manages tokens in the local storage, so it needs to connect to google and setup asynchronously before any components render on the page. as these components depend on the state of the 'current user'\n\n      setLoading(false);\n    }); // unsubscribe removes the listener added to the page by onAuthStateChanged when component unmounts as a cleanup within useEffect 'return' \n\n    return unsubscribe;\n  }, []);\n  const value = {\n    currentUser,\n    profileUpdate,\n    setProfileUpdate,\n    login,\n    signup,\n    logout,\n    resetPassword,\n    updateEmail,\n    updatePassword\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(AuthProvider, \"NVF946xExbA/EXedEve0kLd6Td8=\");\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["/home/onewithclouds/react/firebase-react-auth/src/contexts/AuthContext.js"],"names":["React","useContext","useState","useEffect","auth","AuthContext","createContext","useAuth","AuthProvider","children","currentUser","setCurrentUser","loading","setLoading","profileUpdate","setProfileUpdate","signup","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","logout","signOut","resetPassword","sendPasswordResetEmail","updateEmail","updatePassword","unsubscribe","onAuthStateChanged","user","value"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,SAASC,IAAT,QAAqB,aAArB;;AAGA,MAAMC,WAAW,gBAAGL,KAAK,CAACM,aAAN,EAApB;AAEA,OAAO,SAASC,OAAT,GAAmB;AAAA;;AACtB,SAAON,UAAU,CAACI,WAAD,CAAjB;AACH;;GAFeE,O;;AAIhB,OAAO,SAASC,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAoC;AAAA;;AAEvC,QAAM,CAAEC,WAAF,EAAeC,cAAf,IAAiCT,QAAQ,EAA/C,CAFuC,CAI3C;AACA;AACA;AACA;;AACI,QAAM,CAAEU,OAAF,EAAWC,UAAX,IAA0BX,QAAQ,CAAC,IAAD,CAAxC,CARuC,CAU3C;AACA;AACA;AACA;;AACI,QAAM,CAAEY,aAAF,EAAiBC,gBAAjB,IAAsCb,QAAQ,CAAC,KAAD,CAApD;;AAGA,WAASc,MAAT,CAAgBC,KAAhB,EAAuBC,QAAvB,EAAiC;AAC7B,WAAOd,IAAI,CAACe,8BAAL,CAAoCF,KAApC,EAA2CC,QAA3C,CAAP;AACH;;AAED,WAASE,KAAT,CAAeH,KAAf,EAAsBC,QAAtB,EAAgC;AAC5B,WAAOd,IAAI,CAACiB,0BAAL,CAAgCJ,KAAhC,EAAuCC,QAAvC,CAAP;AACH;;AAED,WAASI,MAAT,GAAkB;AACd,WAAOlB,IAAI,CAACmB,OAAL,EAAP;AACH;;AAED,WAASC,aAAT,CAAuBP,KAAvB,EAA8B;AAC1B,WAAOb,IAAI,CAACqB,sBAAL,CAA4BR,KAA5B,CAAP;AACH;;AAED,WAASS,WAAT,CAAqBT,KAArB,EAA4B;AACxB,WAAOP,WAAW,CAACgB,WAAZ,CAAwBT,KAAxB,CAAP;AACH;;AAED,WAASU,cAAT,CAAwBT,QAAxB,EAAkC;AAC9B,WAAOR,WAAW,CAACiB,cAAZ,CAA2BT,QAA3B,CAAP;AACH;;AAGDf,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA,UAAMyB,WAAW,GAAGxB,IAAI,CAACyB,kBAAL,CAAyBC,IAAI,IAAI;AACjDnB,MAAAA,cAAc,CAACmB,IAAD,CAAd,CADiD,CAEjD;;AACAjB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAJmB,CAApB,CAFY,CAOZ;;AACA,WAAOe,WAAP;AACH,GATQ,EASN,EATM,CAAT;AAWA,QAAMG,KAAK,GAAG;AACdrB,IAAAA,WADc;AAGdI,IAAAA,aAHc;AAIdC,IAAAA,gBAJc;AAMdK,IAAAA,KANc;AAOdJ,IAAAA,MAPc;AAQdM,IAAAA,MARc;AASdE,IAAAA,aATc;AAUdE,IAAAA,WAVc;AAWdC,IAAAA;AAXc,GAAd;AAcA,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAGI,KAA9B;AAAA,cACM,CAACnB,OAAD,IAAYH;AADlB;AAAA;AAAA;AAAA;AAAA,UADJ;AAKH;;IAxEeD,Y;;KAAAA,Y","sourcesContent":["import React, { useContext, useState, useEffect } from 'react'\nimport { auth } from '../firebase'\n\n\nconst AuthContext = React.createContext()\n\nexport function useAuth() {\n    return useContext(AuthContext)\n}\n\nexport function AuthProvider({ children }) {\n\n    const [ currentUser, setCurrentUser] = useState()\n\n//loading state is monitored and defined explicitely because of firebase. \n//firebase manages tokens in the local storage, so it needs to connect to google and \n//setup asynchronously before any components render on the page. \n//as these components depend on the state of the 'current user'\n    const [ loading, setLoading ] = useState(true)\n\n// PrivateRoute from react-router works in a way that distinguishes between a private and a public route(page)\n//for the purposes of user-profile update. firebase monitors the state of current user, and as soon as \n//profile update occurs logs the current user out. hence the state of profileUpdate is added below, modified by UpdateProfile with \n//appropriate checks in the PrivateRoute to ensure the \n    const [ profileUpdate, setProfileUpdate ] = useState(false)\n\n\n    function signup(email, password) {\n        return auth.createUserWithEmailAndPassword(email, password)\n    }\n\n    function login(email, password) {\n        return auth.signInWithEmailAndPassword(email, password)\n    }\n\n    function logout() {\n        return auth.signOut()\n    }\n\n    function resetPassword(email) {\n        return auth.sendPasswordResetEmail(email)\n    }\n\n    function updateEmail(email) {\n        return currentUser.updateEmail(email)\n    }\n\n    function updatePassword(password) {\n        return currentUser.updatePassword(password)\n    }\n\n\n    useEffect(() => {\n        //firebase method onAuthStateChanged adds a listener to the page that listens for 'signup' events, which needs to be cleaned up after the component is unmounted\n        const unsubscribe = auth.onAuthStateChanged( user => {\n            setCurrentUser(user)\n            //loading state is monitored and defined explicitely because of firebase. firebase manages tokens in the local storage, so it needs to connect to google and setup asynchronously before any components render on the page. as these components depend on the state of the 'current user'\n            setLoading(false)\n        })\n        // unsubscribe removes the listener added to the page by onAuthStateChanged when component unmounts as a cleanup within useEffect 'return' \n        return unsubscribe\n    }, [])\n\n    const value = {\n    currentUser,\n\n    profileUpdate,\n    setProfileUpdate,\n\n    login,\n    signup,\n    logout,\n    resetPassword,\n    updateEmail,\n    updatePassword\n}\n\n    return (\n        <AuthContext.Provider value={ value }>\n            { !loading && children }\n        </AuthContext.Provider>\n    )\n}\n\n\n"]},"metadata":{},"sourceType":"module"}